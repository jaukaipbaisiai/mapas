<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoJSON Admin Panel</title>
    <script>
        let geojsonData;

        async function loadGeoJSON() {
            const response = await fetch('lots.geojson'); // Ensure this file is accessible on your server
            geojsonData = await response.json();
            displayLots();
        }

        function displayLots() {
            const container = document.getElementById('lotsContainer');
            container.innerHTML = '';
            geojsonData.features.forEach((feature, index) => {
                const lot = feature.properties;
                const div = document.createElement('div');
                div.innerHTML = `
                    <div style="border:1px solid #ccc; padding:10px; margin:5px;">
                        <strong>Lot ID: ${lot.plot_id}</strong><br>
                        <label>Price: $<input type="text" value="${lot.price}" id="price-${index}"></label><br>
                        <label>Status: 
                            <select id="status-${index}">
                                <option value="For Sale" ${lot.status === "For Sale" ? "selected" : ""}>For Sale</option>
                                <option value="Sold" ${lot.status === "Sold" ? "selected" : ""}>Sold</option>
                                <option value="Reserved" ${lot.status === "Reserved" ? "selected" : ""}>Reserved</option>
                            </select>
                        </label>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function saveChanges() {
            geojsonData.features.forEach((feature, index) => {
                feature.properties.price = document.getElementById(`price-${index}`).value;
                feature.properties.status = document.getElementById(`status-${index}`).value;
            });

            const updatedGeoJSON = JSON.stringify(geojsonData, null, 4);
            const blob = new Blob([updatedGeoJSON], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lots_updated.geojson';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</head>
<body onload="loadGeoJSON()">
    <h2>GeoJSON Admin Panel</h2>
    <div id="lotsContainer"></div>
    <button onclick="saveChanges()">Save Changes</button>
</body>
</html>
